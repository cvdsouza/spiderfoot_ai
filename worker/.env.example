# SpiderFoot Worker — Remote Deployment Configuration (Phase 12: Stateless Workers)
#
# Copy this file to .env and fill in your values before running ./start.sh:
#   cp .env.example .env
#
# This file is only needed for REMOTE deployments (workers on a separate machine).
# For LOCAL deployment (workers on the same machine as the API server),
# no .env changes are required — just run ./start.sh.
#
# Workers are STATELESS — they execute scans and publish results to RabbitMQ.
# No database access or shared filesystem (NFS) required.

# ── RabbitMQ broker ───────────────────────────────────────────────────────────
# Replace with the API server's IP/hostname and your credentials from its .env.
RABBITMQ_URL=amqps://spiderfoot:spiderfoot@192.168.1.10:5671/

# ── RabbitMQ user/password (must match RABBITMQ_URL above) ───────────────────
RABBITMQ_USER=spiderfoot
RABBITMQ_PASS=spiderfoot

# ── TLS — CA certificate ──────────────────────────────────────────────────────
# Host path to the ca.crt copied from the API server's certs/ directory.
# Workers mount this file for RabbitMQ TLS certificate verification.
#
# Copy the cert from the API server:
#   sudo mkdir -p /etc/rabbitmq/certs
#   scp user@api-server:/path/to/spiderfoot_ai/certs/ca.crt /etc/rabbitmq/certs/ca.crt
RABBITMQ_CA_CERT_HOST=/etc/rabbitmq/certs/ca.crt

# ── API server ────────────────────────────────────────────────────────────────
# Used by workers to post heartbeats and status updates.
SPIDERFOOT_API_URL=http://192.168.1.10:5001

# ── Worker identity ───────────────────────────────────────────────────────────
# Unique name for this worker node (shown in the Workers UI on the API server).
# Use a different name on each remote machine.
SPIDERFOOT_WORKER_NAME=worker-node-2

# ── Concurrency ───────────────────────────────────────────────────────────────
# Maximum number of concurrent scans per worker type.
# Rule of thumb: keep total workers below (CPU cores / 2).
WORKER_FAST_CONCURRENCY=2
WORKER_SLOW_CONCURRENCY=1
